---
id: "002"
title: "Phase II Constitution Amendment"
stage: "constitution"
date: "2026-01-06"
surface: "agent"
model: "Sonnet 4.5"
feature: "none"
branch: "001-todo-console-app"
user: "irza"
command: "/sp.constitution"
labels: ["constitution","phase2","fullstack","amendment"]
links:
  spec: "null"
  ticket: "null"
  adr: "null"
  pr: "null"
files:
  - ".specify/memory/constitution.md"
tests:
  - "None (constitution update)"
---

## Prompt

/sp.constitution

Project: Todo Full-Stack Web Application - Phase II (Hackathon II)

Core principles:
- Spec-driven development with subagent orchestration (all code generated via Claude Code + Subagents)
- Multi-user architecture (each user has isolated data)
- Type-safe full-stack (TypeScript frontend, Python backend, shared data contracts)
- Secure by default (JWT authentication, user authorization, input validation)
- Production-ready patterns (error handling, loading states, responsive design)

Key standards:
- Frontend: Next.js 15+ (App Router), TypeScript, Tailwind CSS, shadcn/ui
- Backend: Python FastAPI, SQLModel ORM, Pydantic validation
- Database: Neon Serverless PostgreSQL
- Authentication: Better Auth (frontend) + JWT verification (backend)
- API: RESTful, JSON, JWT Bearer tokens, OpenAPI documentation
- Code organization: Monorepo structure (frontend/ and backend/ folders)
- Naming: camelCase (TypeScript), snake_case (Python)
- Documentation: README per service, API docs auto-generated

Constraints:
- Database: Neon Serverless PostgreSQL only (no local SQLite)
- Authentication: Better Auth + JWT (no custom auth)
- Frontend hosting: Vercel (free tier)
- Backend hosting: Railway/Render/Heroku (free tier acceptable)
- File structure: Monorepo with frontend/ and backend/ folders
- User isolation: All queries filtered by user_id
- API security: All endpoints except /auth/* require JWT token
- CORS: Configure for frontend domain
- Environment variables: Never commit secrets, use .env.example templates

Technology versions:
- Node.js: 20+
- Python: 3.13+
- Next.js: 15+
- FastAPI: 0.115+
- PostgreSQL: 14+ (via Neon)

Success criteria:
- Multi-user system: Users can signup, login, manage their own tasks
- CRUD operations: Create, read, update, delete tasks via web UI
- Authentication flow: Signup ‚Üí Login ‚Üí Protected routes ‚Üí Logout
- User isolation: Users only see their own tasks
- Responsive design: Works on mobile, tablet, desktop
- Error handling: User-friendly error messages
- Loading states: Skeleton loaders, spinners where appropriate
- Deployed: Frontend on Vercel, backend on cloud platform
- API documentation: Swagger UI at /docs
- Zero manual coding: All code generated by subagents from specs
- Can be demoed immediately after deployment

## Response snapshot

Updated constitution from v1.0.0 (Phase I CLI) to v2.0.0 (Phase II Full-Stack). Major version bump justified by:
- Complete technology stack replacement (CLI ‚Üí Full-Stack Web)
- Added 5 new core principles for multi-user architecture
- Full-stack constraints (Next.js, FastAPI, Neon, Better Auth)
- Monorepo structure with frontend/backend folders
- JWT authentication and API security requirements
- New success criteria for Phase II deployment

## Outcome

- ‚úÖ Impact: Constitution updated for Phase II full-stack web application
- üß™ Tests: N/A - governance document
- üìÅ Files: 1 modified (.specify/memory/constitution.md)
- üîÅ Next prompts: Ready for `/sp.specify` to create feature specs
- üß† Reflection: Major version bump appropriate for complete architectural shift

## Evaluation notes (flywheel)

- Failure modes observed: N/A
- Graders run and results (PASS/FAIL): N/A
- Prompt variant (if applicable): N/A
- Next experiment (smallest change to try): N/A
